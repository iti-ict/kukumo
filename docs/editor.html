<html><head><title>Kukumo - Editor</title><meta name="description" content="A human-friendly BDD testing tool"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="profile" href="http://www.w3.org/2005/10/profile"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/all.min.css" integrity="sha512-BnbUDfEUfV0Slx6TunuB042k9tuKe3xrD6q4mg5Ed72LTgzDIcLPxg6yI2gcMFRyomt+yJJxE+zJwNmxki6/RA==" rel="stylesheet" crossorigin="anonymous" referrerpolicy="no-referrer"><link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" rel="stylesheet" crossorigin="anonymous" referrerpolicy="no-referrer"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/prism.min.js" integrity="sha512-YBk7HhgDZvBxmtOfUdvX0z8IH2d10Hp3aEygaMNhtF8fSOvBZ16D/1bXZTJV6ndk/L/DlXxYStP8jrF77v2MIg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><link href="css/common.css" rel="stylesheet"><link href="css/style.css" rel="stylesheet"><style>:root {
--menu-regular-background-color: #575757;
--menu-bold-background-color: #413e3e;
--menu-foreground-color: #f1f4f4;
--menu-decoration-color: #b7d4da;
--gui-element-color: #f08080;
}</style></head><body><a id="jump-to-content" href="#content">jump to content</a><header><div class="title-and-subtitle"><h1 class="title label"><i class="external-icon" style="background-image: url(&#x27;images/image-1.png&#x27;)"></i><span>Kukumo</span></h1><span class="subtitle">A human-friendly BDD testing tool</span></div><nav class="sections"><ul><li><a class="label external" href="kukumo/kukumo-core/target/docsite/index.html" target="_blank" rel="external noreferrer noopener nofollow"><i class="fas fa-cog"></i><span>Kukumo Core</span></a></li><li><a class="label internal" href="plugins.html"><i class="fas fa-plug"></i><span>Plugins</span></a><ul class="dropdown"><li><a class="label internal" href="steps.html"><i class="fas fa-walking"></i><span>Steps</span></a></li><li><a class="label internal" href="reports.html"><i class="fas fa-file"></i><span>Reports</span></a></li></ul></li><li class="selected"><a class="label internal" href="editor.html"><i class="fas fa-edit"></i><span>Editor</span></a></li><li><a class="label internal" href="docker.html"><i class="fab fa-docker"></i><span>Docker</span></a></li><li><a class="label internal" href="license.html"><i class="fas fa-balance-scale"></i><span>LICENSE</span></a></li><li><a class="label external" href="https://github.com/iti-ict/kukumo" target="_blank" rel="external noreferrer noopener nofollow"><i class="fab fa-github"></i><span></span></a></li></ul></nav><div class="company"><a class="label external" href="https://iti.es" target="_blank" rel="external noreferrer noopener nofollow"><img src="images/image-2.png"><span></span></a></div></header><nav class="breadcrumbs"><ol><li><a class="internal" href="index.html">Kukumo</a></li><li><a>Editor</a></li></ol></nav><aside><nav class="toc"><ol><li><a class="internal" href="#uso-de-la-extensión-vs-code">Uso de la extensión VS Code</a></li><ol><li><a class="internal" href="#autocompletado-de-pasos">Autocompletado de pasos</a></li><li><a class="internal" href="#marcado-de-errores">Marcado de errores</a></li><li><a class="internal" href="#generación-de-ids">Generación de IDs</a></li><li><a class="internal" href="#generación-de-implementación">Generación de implementación</a></li><li><a class="internal" href="#navegación-entre-definición-e-implementación">Navegación entre definición e implementación</a></li></ol><li><a class="internal" href="#descarga-e-instalación-de-la-extensión-empaquetada-como-vsix">Descarga e instalación de la extensión empaquetada como VSIX</a></li><li><a class="internal" href="#configurando-la-extensión">Configurando la extensión</a></li><ol><li><a class="internal" href="#ajustar-el-modo-de-lenguaje-al-abrir-archivos">Ajustar el modo de lenguaje al abrir archivos</a></li><li><a class="internal" href="#instalación-del-servidor-de-ejecución">Instalación del servidor de ejecución</a></li></ol></ol></ol></nav></aside><section class="content" id="content"><h1 id="extensión-para-visual-studio-code">Extensión para Visual Studio Code</h1>
<p>Una de las principales barreras a la hora de comenzar con Kukumo
es la necesidad de conocer de antemano la sintaxis exacta a usar
a la hora de escribir los pasos de un test. Consultar la documentación
existente para cada librería de pasos es esencial pero el tener que
ajustarse a unos patrones de texto precisos provoca que, en multitud
de ocasiones, escribamos pasos que contengan pequeños errores no
identificables a simple vista y de cuya existencia solo seremos conscientes al
intentar ejecutar el plan de pruebas y recibir un error. Con esto, el
escribir un escenario acaba siendo un proceso de prueba y error tedioso y
poco productivo.</p>
<p>Para solventar este problema, se ha desarrollado una extensión para <a class="external" target="_blank" rel="external noreferrer noopener nofollow" href="https://code.visualstudio.com/">Visual Studio Code</a>
que nos asistirá durante la escritura de los tests. Sus características
principales son:</p>
<ul>
<li>Autocompletado de pasos</li>
<li>Marcado de errores</li>
<li>Esquema del plan de test global</li>
<li>Ejecución de tests y visualización de resultados</li>
</ul>
<p>Esta extensión requiere a su vez de la existencia de un servidor de ejecuciones, que
puede ser local o remoto. El servidor de ejecuciones es el que proveerá la información
de pasos necesaria en base a los plugins que tenga instalados, mediante el protocolo <a class="external" target="_blank" rel="external noreferrer noopener nofollow" href="https://microsoft.github.io/language-server-protocol/">LSP</a>.</p>
<h2 id="uso-de-la-extensión-vs-code">Uso de la extensión VS Code</h2>
<h3 id="autocompletado-de-pasos">Autocompletado de pasos</h3>
<p>El principal valor aportado es el autocompletado de <em>keywords</em> y pasos.
Se puede invocar con la combinación de teclas definida en VS Code
para tal efecto (por defecto Ctrl+Espacio).</p>
<p><img src="" alt="image" /></p>
<p>Nótese que el idioma usado para las opciones de autocompletado
varía en función del idioma definido para el fichero con la propiedad
<code>language</code> (siendo inglés si no se define):</p>
<p><img src="images/Editor/image-1.gif" alt="image" /></p>
<h3 id="marcado-de-errores">Marcado de errores</h3>
<p>Si escribimos un paso que no concuerda con nada de lo disponible en las librerías de pasos,
se nos marcará el error correspondiente.</p>
<p><img src="images/Editor/image-2.gif" alt="image" /></p>
<h3 id="generación-de-ids">Generación de IDs</h3>
<p>Si un escenario no tiene un ID definido, se muestra un aviso informando de ello. Además,
ofrece la opción de generar uno nuevo (usando texto aleatorio).</p>
<p><img src="images/Editor/image-3.gif" alt="image" /></p>
<h3 id="generación-de-implementación">Generación de implementación</h3>
<p>Cuando un escenario está marcado como definición y tiene su ID correspondiente, pero
no existe ningún escenario a nivel implementación con el mismo ID, se muestra un aviso.
Además, ofrece la opción de generar un esqueleto de implementación automáticamente.</p>
<p><img src="images/Editor/image-4.gif" alt="image" /></p>
<h3 id="navegación-entre-definición-e-implementación">Navegación entre definición e implementación</h3>
<p>Cuando tengamos un escenario escrito en dos niveles (y correctamente etiquetados con su ID),
tendremos la posibilidad de navegar entre uno y otro con el atajo de teclado correspondiente
definido en VS Code (F12 y Ctrl+F12 por defecto) o con el menú contextual. También podemos
echar un vistado rápido (<em>peek</em>) sin tener que abandonar el fichero.</p>
<p><img src="images/Editor/image-5.gif" alt="image" /></p>
<h2 id="descarga-e-instalación-de-la-extensión-empaquetada-como-vsix">Descarga e instalación de la extensión empaquetada como VSIX</h2>
<blockquote>
<p>Los siguientes pasos requiren que acceso al Gitlab y al servidor Nexus
del ITI.</p>
</blockquote>
<ol>
<li>
<p>Instalar Visual Studio Code (en caso de no tenerlo) desde su <a class="external" target="_blank" rel="external noreferrer noopener nofollow" href="https://code.visualstudio.com/">sitio web</a></p>
</li>
<li>
<p>Descargar la extensión empaquetada de la siguiente url:
https://gitlab.iti.upv.es/act/act/devops/kukumo-project/-/raw/master/kukumo-vscode-extension/kukumo-vscode-extension-latest.vsix</p>
</li>
<li>
<p>Instalar la extensión:</p>
<ol>
<li>Ir a la pestaña <em>Extensions</em></li>
<li>Pulsar sobre el botón <code>...</code></li>
<li>Seleccionar <em>Install from VSIX...</em></li>
<li>Seleccionar el fichero descargado en el paso anterior</li>
</ol>
</li>
</ol>
<p><img src="" alt="image" /></p>
<h2 id="configurando-la-extensión">Configurando la extensión</h2>
<p>Una vez instalada, hay ciertos parametros de configuración que pueda ser queramos
ajustar. Para ello, pulsar el icono de rueda dentada en la parte inferior izquierda y
seleccionar <em>Settings</em> (o pulsar <em>Ctrl+coma</em> si usamos los atajos de teclado estándar).
A continuación escribir <code>kukumo</code> en los filtros.</p>
<p><img src="images/Editor/image-6.png" alt="image" /></p>
<p>La configuración por defecto está preparada para funcionar con un servidor de ejecuciones local, pero podemos cambiar las URL de conexión
si queremos usar un servidor remoto.</p>
<h3 id="ajustar-el-modo-de-lenguaje-al-abrir-archivos">Ajustar el modo de lenguaje al abrir archivos</h3>
<p>Es posible que en el momento de instalar la extensión, ya tengamos
alguna otra extensión para la edición de archivos Gherkin. De ser así, cuando abramos un archivo (<code>.feature</code>) no usará la extensión de Kukumo inicialmente. Podemos detectarlo en la parte derecha de la barra inferior:</p>
<p><img src="images/Editor/image-7.png" alt="image" /></p>
<p>En esta circunstancia, deberemos pulsar sobre el texto <code>Gherkin</code>
en la barra, seleccionar la opción <em>Configure file association...</em>
y buscar el modo de lenguaje <code>Kukumo Gherkin</code>. Tras
eso, el resto de archivos <code>.feature</code> ya se cargarán usando Kukumo.</p>
<p><img src="images/Editor/image-8.gif" alt="image" /></p>
<h3 id="instalación-del-servidor-de-ejecución">Instalación del servidor de ejecución</h3>
<p>Si no se dispone acceso remoto a un servidor de ejecución, podemos
instalar uno en nuestra propia máquina desde una imagen Docker. Para mayor facilidad usaremos una imagen <em>all-in-one</em> que incluye pre-instalados varios plugins.</p>
<p>Para ello:</p>
<ol>
<li>
<p>Identficarse en el servidor Nexus del ITI:</p>
<pre><code>docker login nexus-kukumo.iti.upv.es
</code></pre>
</li>
<li>
<p>Descargar la imagen y ejecutarla en un contenedor:</p>
<pre><code>docker run -d --rm -p 8880:8080 -p 8890:8090 --name kukumo-server-demo nexus-kukumo.iti.upv.es/kukumo-server-demo:latest
</code></pre>
<blockquote>
<p>Podemos enrutar los puertos a otros diferentes en caso de estar ocupados, pero actualizando la configuración de Kukumo en VS Code</p>
</blockquote>
</li>
</ol>
<p><img src="images/Editor/image-9.gif" alt="image" /></p>
</section></body></html>